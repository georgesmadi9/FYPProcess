<!-- Upload form for a project -->

<form class="form-horizontal" role="form">

    <div class="container-fluid row form-group">
        <label class="col-md-4 control-label" for="projectname">Project Title</label>
        <div class="col-md-4">
            <input
                    cam-variable-name="projectname"
                    cam-variable-type="String"
                    class="form-control input-md"
                    id="projectname"
                    name="projectname"
                    required=""
                    type="text"
            >
        </div>
    </div>
    <div class="container-fluid row form-group">
        <label class="col-md-4 control-label" for="advisor">Advisor Name</label>
        <div class="col-md-4">
            <input
                    cam-variable-name="advisor"
                    cam-variable-type="String"
                    class="form-control input-md"
                    id="advisor"
                    name="Advisor"
                    required=""
                    type="text"
            >
        </div>
    </div>
    <div class="container-fluid row form-group">
        <label class="col-md-4 control-label" for="studentsnbr">Number of Students</label>
        <div class="col-md-4">
            <input
                    cam-variable-name="studentsnbr"
                    cam-variable-type="Integer"
                    class="form-control input-md"
                    id="studentsnbr"
                    max="4"
                    min="2"
                    name="NumberofStudents"
                    placeholder="2 to 4"
                    required=""
                    type="number"
            >
        </div>
    </div>

    <div class="form-group container-fluid row">
        <label class="col-md-4 control-label" for="ProjectForm">Project Form</label>
        <div class="col-md-4">
            <input
                    cam-max-filesize="10000000"
                    cam-variable-name="document"
                    cam-variable-type="File"
                    class="form-control btn"
                    id="ProjectForm"
                    name="ProjectForm"
                    type="file"
            >
            <div class="help-block">This field is required</div>
        </div>
    </div>

    <script cam-script type="text/form-script">
        // script to upload the file on the File servlet
        var fileUpload = $('#ProjectForm');
        var fileUploadHelpBlock = $('.help-block', fileUpload.parent());

        function flagFileUpload() {
          var hasFile = fileUpload.get(0).files.length > 0;
          fileUpload[hasFile ? 'removeClass' : 'addClass']('ng-invalid');
          fileUploadHelpBlock[hasFile ? 'removeClass' : 'addClass']('error');
          return hasFile;
        }

        fileUpload.on('change', function () {
          flagFileUpload();
        });

        camForm.on('submit', function(evt) {
          var hasFile = flagFileUpload();

          // prevent submit if user has not provided a file
          evt.submitPrevented = !hasFile;
        });

    </script>

</form>
